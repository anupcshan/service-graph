Service graph :
=============== 
**End-to-End dependency graphing and monitoring system for a distributed web services environment**

The project started as a random hack on graph visualization, and it ended up as a full-fledged web services monitoring framework with an intuitive graph visualization of the services ecosystem, drill-down graphs of related metrics.

What does it do?
===============

Image of all services doing good.

Image of one service misbheaving.

Image of one service showing increased latency.

Runtime metrics at datacenter level.

Runtime metrics at server level.

Getting started :
=================

Clone the repository to your local machine. 
    git clone https://github.com/narendran/service-graph.git

Libraries required :
--------------------
* NodeJS - The controller. Serves the webpages, exposes the required REST services to serve the runtime RPC metrics.
* MongoDB - NoSQL data store which stores the dependency graph, RPC service metrics and the RPC client metrics.
* Redis - Key-Value store for serving the real-time metrics to the landing page.

Steps :
-------
1. Start the mongoDB server and redis server. Right now, the domains where these servers lie are hardcoded. So to get started run them on localhost.
2. Our monitoring system depends on tuples of the following form 
	{
  'instance': getHierAddr(config.addr),
  'service': config.service\_name,
  'calls': 0,
  'total\_resp\_ms': 0,
  'errors': 0,
  'avg\_resp\_ms': 0
}
3. The tuple mentioned above should be generated by each RPC service every second and pushed into the Redis MQ (Channel : "servicestats"). Please refer the sample\_server.js file to get the list of channels we currently use.
4. As and when a new tuple is pushed into the message queue, we calculate the running average of average response time and error rate.
5. Now the infrastructure part is done, but to quickly get started, we have created a mock infrastructure under mock\_infra. To get the mock services up and running start all the services by executing "node sample\_server.js abc.js". Start all the services present under the mock\_infra directory (auth1.json, auth2.json ..) because as in any real-world scenario they are interconnected. Next, start the mock load generator by executing "python loadgen.py". 
6. Start the main controller by executing "node server.js" under the server directory. Once started, you should be able to see your landing page in localhost:8000. If everything is good, you should see a landing page similar to the following :
![alt tag](https://raw2.github.com/narendran/service-graph/master/snapshots/landing.png)





